# hh.ru

## 1. Тема и целевая аудитория

hh.ru — российский сервис по поиску работы и найму

Аудитория:
- MAU 33,8M [^1]
- WAU 9,4M [^1]
- DAU 2,1M [^1]

Распределение по странам [^2]:
1. Россия - 91,96%
2. Беларусь - 2,13%
3. Германия - 0,82%
4. Армения - 0,56%
5. Нидерланды - 0,55%

* Ключевой функционал - просмотр открытых вакансий и публикация новых вакансий

* Ключевое продуктовое решение - возможность отклика на вакансию и связаться с работодателем через платформу

Выделен следующий функционал MVP:
- Авторизация
- Поиск (по ключевым словам в вакансии, категориям)
- Просмотр вакансий
- Публикация вакансий
- Отклик на вакансии с последующей возможностью связаться во внутреннем чате
- Создание резюме по шаблону
- LLM модель, отсеивающая со стороны рекрутера "спам-отклики", чтобы максимизировать общее качество всех откликов

## 2. Расчет нагрузки

Анализ трафика:

- 54 млн пользователей [^3]
- 18 млн зарегистрированных пользователей ежемесячно [^4]
- 2276 тыс проверенных компаний [^4]
- 88 млн резюме в базе [^4]
- 13 964 601 активных резюме [^6]
- 1217 тыс вакансий [^4]


Действия пользователя:

| Действие                    | Кол-во в день | Обоснование |
|-----------------------------|---------------|-------------|
| Авторизация                 | 0,03 | Допустим, что токен авторизации живет месяц. Следовательно, для одного пользователя регистрация будет производиться 1/30 = 0,03 раз|
| Регистрация                 | 0,00005 | В сервисе-аналоге linkedin прирост пользователей с 2023 по 2024 год составлял 1,1М[^13]. Из соотношения 58,6М (DAU linkedin[^11]) / 2,1M (DAU hh.ru) = 1,1M / x => x = 0,018 * 2,1M пользователя в год => 0,00005 один пользователь делает регистраций в день | 
| Просмотр вакансий           | 44 | В сервисе-аналоге linkedin каждую минуту просматривается 1,8М объявлений[^10] -> 2592M объявлений просматривается в день. Из соотношения 58,6М (DAU linkedin[^11]) / 2,1M (DAU hh.ru) = 2592M / x => x = 44 * 2,1M просмотра в день => 44 объявления просматривает один пользователь в день | 
| Поиск вакансий              | 13 | 30% пользователей пользуется поисковой строкой, если она есть на сайте[^12], поэтому берем значение просмотра вакансий и умножаем на 0,3 и получаем 44 * 0,3 = 13,2|
| Публикация вакансий         | 0,001 | В linkedin 30М+ вакансий публикуется в год => 83000 вакансии в день. Из тех же пропорций получаем, что в день одним пользователем на hh.ru публикуется 0,001 вакансия|
| Закрытие вакансий           | 0,003 | Сделаем предположение, что из закрытия вакансии следует один человек, который получил работу. В сервисе-аналоге indeed 27 человек находит работу каждую минуту[^6]. Из соотношения 13,1М (DAU indeed[^7]) / 2,1M = 38880 (количество наёмов в день в indeed) / x => x = 6232 наёма в день = 0,003 наёмов дает один рекрутер в день|
| Отклик на вакансию          | 0,2 | В сервисе-аналоге linkedin каждую минуту совершается 9,5 тыс откликов[^10] -> 13,68M откликов в день. DAU в linkedin составляет 58,6М[^11]. составляем такое же уравнение и получаем, что в hh.ru совершается 490238 откликов в день. Делим на DAU и получаем 0,2 отклика в день от одного пользователя| 
| Ответ на отклик на вакансию | 0,2 | Количество ответов на отклики будем считать равными количеству откликов| 
| Использование чата          | 1,7 | В linkedin отправляется более 100М сообщений в день[^8] => из тех же пропорций 1,7 сообщений отправляется одним пользователем в hh.ru в день| 
| Создание резюме             |  | По созданию резюме данных нет | 
| __Итог__                    | 59 | |



Хранилище:

| Сущность                    | Размер (в Тб) |                                          Обоснование                                             |
|-----------------------------|---------------|--------------------------------------------------------------------------------------------------|
| Резюме                      |      20,5     | 88 млн (резюме) * (150 Кб (текст) + 100 Кб (фото)) = 22000000000 Кб = 20,5 Тб                    |
| Вакансии                    |      0,39     | 1,217 млн (вакансии) * (150 Кб (текст) + 200 Кб (фотографии в вакансии)) = 425950000 Кб = 0,39 Тб| 
|Компании                     |      0,52     | 2,276 млн (компании) * (150 Кб (текст) + 100 Кб (фото)) = 569000000 Кб = 0,52 Тб                 | 
|Пользователи                 |       6       | 54 млн (пользователи) * (20 Кб (текст) + 100 Кб (фото)) = 6480000000 Кб = 6 Тб                   | 

Общий размер хранилища: 27,41 Тб

### Сетевая нагрузка:

Расчет rps:
- 2,1 млн DAU * 59 (действия пользователей) / 86400 (кол-во секунд в дне) = 1434 rps
- Средний размер запроса = 5 Кб (усредненно для всех типов запросов)
- Пиковый коэффициент: 2x. Ввиду специфики сайта, нет явных пиковых событий, кроме повышенной дневной активности пользователей в сравнении с вечерней активностью.

Итого: 1434 * 5 * 3 * 8 бит = 168 Мбит/сек (средняя пиковая нагрузка)

| Действие                    | RPS | RPS в пик | Сеть пик (Мбит/сек) | Сеть в день (Гбайт/сутки) |
|-----------------------------|-----|-----------|---------------------|------------------------|
| Авторизация                 | 0,7 | 1,4 | 0,07 | 0,35 |
| Регистрация                 | 0,5 | 1,0 | 0,08 | 0,41 |
| Просмотр вакансий           | 1069 | 2138 | 1670 | 8808,3 |
| Поиск вакансий              | 315 | 630 | 492 | 2595,5 |
| Публикация вакансий         | 0,02 | 0,04 | 0,02 | 0,08 |
| Закрытие вакансий           | 0,07 | 0,14 | 0,005 | 0,02 |
| Отклик на вакансию          | 4,8 | 9,6 | 3,75 | 19,78 |
| Ответ на отклик на вакансию | 4,8 | 9,6 | 0,75 | 3,95 |
| Использование чата          | 41,3 | 82,6 | 6,5 | 34,03 |
| Создание резюме             | 3,9 | 7,8 | 21 | 112,47 |

- Авторизация
  - (0,03 * 2,1М) / 86400 = 0,7 rps
  - Несколько полей для авторизации примерно займёт 6 Кб
  - 1,4 * 6 Кб * 8 / 1024 = 0,07 Мбит/сек
  - 0,7 * 6 Кб * 86400 / (1024 * 1024) = 0,35 Гбайт/сутки
- Регистрация
  - (0,02 * 2,1М) / 86400 = 0,5 rps
  - Больше полей, чем в авторизации, примерно 10 Кб
  - 1,0 * 10 Кб * 8 / 1024 = 0,08 Мбит/сек
  - 0,5 * 10 Кб * 86400 / (1024 * 1024) = 0,41 Гбайт/сутки
- Просмотр вакансий
  - (44 * 2,1М) / 86400 = 1069 rps
  - 100 Кб - список вакансий с коротким описанием, иконками компаний, названиями вакансий
  - 2138 * 100 Кб * 8 / 1024 = 1670 Мбит/сек
  - 1069 * 100 Кб * 86400 / (1024 * 1024) = 8808,3 Гбайт/сутки
- Поиск вакансий
  - (13 * 2,1М) / 86400 = 315 rps
  - 100 Кб
  - 630 * 100 Кб * 8 / 1024 = 492 Мбит/сек
  - 315 * 100 Кб * 86400 / (1024 * 1024) = 2595,5 Гбайт/сутки
- Публикация вакансий
  - (0,001 * 2,1М) / 86400 = 0,02 rps
  - 50 Кб - фотография внутри вакансии, подробное описание вакансии
  - 0,04 * 50 Кб * 8 / 1024 = 0,02 Мбит/сек
  - 0,02 * 50 Кб * 86400 / (1024 * 1024) = 0,08 Гбайт/сутки
- Закрытие вакансий
  - (0,003 * 2,1М) / 86400 = 0,07 rps
  - 5 Кб
  - 0,14 * 5 Кб * 8 / 1024 = 0,005 Мбит/сек
  - 0,07 * 5 Кб * 86400 / (1024 * 1024) = 0,02 Гбайт/сутки
- Отклик на вакансию
  - (0,2 * 2,1М) / 86400 = 4,8 rps
  - 50 Кб - потенциальное сопроводительное письмо + ссылка на резюме
  - 9,6 * 50 Кб * 8 / 1024 = 3,75 Мбит/сек
  - 4,8 * 50 Кб * 86400 / (1024 * 1024) = 19,78 Гбайт/сутки
- Ответ на отклик на вакансию
  - (0,2 * 2,1М) / 86400 = 4,8 rps
  - 10 Кб - текстовое содержание ответа на отклик
  - 9,6 * 10 Кб * 8 / 1024 = 0,75 Мбит/сек
  - 4,8 * 10 Кб * 86400 / (1024 * 1024) = 3,95 Гбайт/сутки
- Использование чата
  - (1,7 * 2,1М) / 86400 = 41,3 rps
  - 10 Кб - текст сообщения
  - 82,6 * 10 Кб * 8 / 1024 = 6,5 Мбит/сек
  - 41,3 * 10 Кб * 86400 / (1024 * 1024) = 34,03 Гбайт/сутки
- Создание резюме
  - (0,16 * 2,1М) / 86400 = 3,9 rps
  - 350 Кб - текст резюме + фотография + ссылки на личные сейты пользователя
  - 7,8 * 350 Кб * 8 / 1024 = 21 Мбит/сек
  - 3,9 * 350 Кб * 86400 / (1024 * 1024) = 112,47 Гбайт/сутки
 



## Ссылки

[^1]: https://yadro.ru/stat/HeadHunter/index.html?period=month
[^2]: https://hypestat.com/info/hh.ru
[^3]: https://investor.hh.ru/
[^4]: https://hh.ru/article/28?from=footer_new&hhtmFromLabel=footer_new&hhtmFrom=main
[^5]: https://hh.ru/search/resume?text=&area=1&isDefaultArea=true&exp_period=all_time&logic=normal&pos=full_text&hhtmFrom=vacancy_search_list&hhtmFromLabel=resume_search_line
[^6]: https://www.indeed.com/about
[^7]: https://hypestat.com/info/indeed.com
[^8]: https://analyzify.com/statsup/linkedin
[^9]: https://thesocialshepherd.com/blog/linkedin-statistics
[^10]: https://news.linkedin.com/about-us 
[^11]: https://hypestat.com/info/linkedin.com
[^12]: https://searchanise.io/blog/navigation-vs-search-box/
[^13]: https://www.businessofapps.com/data/linkedin-statistics/
[^14]: https://stats.hh.ru/moscow
