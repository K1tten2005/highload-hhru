<img width="66" height="17" alt="image" src="https://github.com/user-attachments/assets/0bef7e99-9c34-4955-ac34-ded7c89301a3" /># hh.ru

## 1. Тема и целевая аудитория

hh.ru — российский сервис по поиску работы и найму

Аудитория:
- MAU 33,8M [^1]
- WAU 9,4M [^1]
- DAU 2,1M [^1]

Распределение по странам [^2]:
1. Россия - 91,96%
2. Беларусь - 2,13%
3. Германия - 0,82%
4. Армения - 0,56%
5. Нидерланды - 0,55%

* Ключевой функционал - просмотр открытых вакансий и публикация новых вакансий

* Ключевое продуктовое решение - возможность отклика на вакансию и связаться с работодателем через платформу

Выделен следующий функционал MVP:
- Авторизация
- Поиск (по ключевым словам в вакансии, категориям)
- Просмотр вакансий
- Публикация вакансий
- Отклик на вакансии с последующей возможностью связаться во внутреннем чате
- Создание резюме по шаблону
- LLM модель, отсеивающая со стороны рекрутера "спам-отклики", чтобы максимизировать общее качество всех откликов

## 2. Расчет нагрузки

Анализ трафика:

- 54 млн пользователей [^3]
- 18 млн зарегистрированных пользователей ежемесячно [^4]
- 2276 тыс проверенных компаний [^4]
- 88 млн резюме в базе [^4]
- 13 964 601 активных резюме [^6]
- 1217 тыс вакансий [^4]


Действия пользователя:

| Действие                    | Кол-во в день | Обоснование |
|-----------------------------|---------------|-------------|
| Авторизация                 | 0,03 | Допустим, что токен авторизации живет месяц. Следовательно, для одного пользователя регистрация будет производиться 1/30 = 0,03 раз|
| Регистрация                 | 0,00005 | В сервисе-аналоге linkedin прирост пользователей с 2023 по 2024 год составлял 1,1М[^13]. Из соотношения 58,6М (DAU linkedin[^11]) / 2,1M (DAU hh.ru) = 1,1M / x => x = 0,018 * 2,1M пользователя в год => 0,00005 один пользователь делает регистраций в день | 
| Просмотр вакансий           | 44 | В сервисе-аналоге linkedin каждую минуту просматривается 1,8М объявлений[^10] -> 2592M объявлений просматривается в день. Из соотношения 58,6М (DAU linkedin[^11]) / 2,1M (DAU hh.ru) = 2592M / x => x = 44 * 2,1M просмотра в день => 44 объявления просматривает один пользователь в день | 
| Поиск вакансий              | 13 | 30% пользователей пользуется поисковой строкой, если она есть на сайте[^12], поэтому берем значение просмотра вакансий и умножаем на 0,3 и получаем 44 * 0,3 = 13,2|
| Публикация вакансий         | 0,001 | В linkedin 30М+ вакансий публикуется в год[^8] => 83000 вакансии в день. Из тех же пропорций получаем, что в день одним пользователем на hh.ru публикуется 0,001 вакансия|
| Закрытие вакансий           | 0,0001 | Считаем, что закрытие вакансии = 1 человек нашёл работу. В linkedin происходит 4,2M найма в год, т. е. 11666 закрытых вакансий в день[^15]. По соотношению в hh.ru одним человеком закрывается 0,0001 вакансий в день|
| Отклик на вакансию          | 0,2 | В сервисе-аналоге linkedin каждую минуту совершается 9,5 тыс откликов[^10] -> 13,68M откликов в день. DAU в linkedin составляет 58,6М[^11]. Составляем такое же уравнение и получаем, что в hh.ru совершается 490238 откликов в день. Делим на DAU и получаем 0,2 отклика в день от одного пользователя| 
| Ответ на отклик на вакансию | 0,2 | Количество ответов на отклики будем считать равными количеству откликов| 
| Использование чата          | 1,7 | В linkedin отправляется более 100М сообщений в день[^8] => из тех же пропорций 1,7 сообщений отправляется одним пользователем в hh.ru в день| 
| Создание резюме             |  | По созданию резюме данных нет | 
| __Итог__                    | 59 | |



Хранилище:

| Сущность                    | Размер (в Тб) |                                          Обоснование                                             |
|-----------------------------|---------------|--------------------------------------------------------------------------------------------------|
| Резюме                      |      14,65     | Чётких данных по распределению резюме с фото и без нет[^16]. В исследовании[^17] указывается, что из 200 резюме 27 не имеют фотографии => 86,5% пользователей имеют фотографии. Также источник[^18] советует держать размер фотографии меньше 200 Кб, поэтому возьмём этот размер за средний, обычно стандартная фотография для паспорта/резюме столько и весит. 1 символ весит 2 байта. Возьмём выборку из 20 резюме и посчитаем среднее количество символов: (2959 + 1341 + 5425 + 3315 + 1435 + 5141 + 951 + 3420 + 4435 + 683 + 7435 + 1009 + 2283 + 3446 + 2823 + 2442 + 2707 + 2530 + 1680 + 3558) / 20 = 2950. 2950 * 2 / 1024 = 5,8 Кб. <br>88 млн (резюме) * (5,8 Кб (текст) + 200 Кб (фото) * 0,865) = 15734400000 Кб = 14,65 Тб |
| Вакансии                    |      0,12     | Точно таким же образом рассчитаем вес текста в вакансиях, возьмем выборку из 20 вакансий. (2636 + 2033 + 2062 + 2581 + 1229 + 3215 + 3354 + 2117 + 3717 + 2113 + 3057 + 1625 + 4519 + 3262 + 1844 + 4040 + 1565 + 2020 + 2573 + 1855) / 20 = 2570. 2570 * 2 / 1024 = 5,02 Кб. Для расчета фотографий возьмем выборку из 20 вакансий. (0 + 0 + 0 + 0 + 0 + 0 + 0 + (117,6 + 0,8 + 0,7 + 0,79 + 1,03 + 1,04 + 71,2 + 108,48 + 10,08) + (37,8 + 4,5 + 324,5 + 62,03 + 0,8 + 177,9 + 88,1 + 60,9 + 50,9 + 2,6) + (117,6 + 0,8 + 0,7 + 0,79 + 1,03 + 1,04 + 71,2 + 108,48 + 10,08) + 0 + 0 + (3,2 + 10,2 + 6,6 + 6,1 + 1,06 + 0,8 + 0,8 + 296,7 + 2,3 + 9,08 + 5,9) + (87,06 + 0,18 + 0,49 + 40,6 + 6,75) + (7,7 + 12,3 + 157,01 + 1,06 + 0,44 + 0,5 + 0,76 + 0,37 + 0,46 + 0,92 + 3,17) + 0 + 0 + 0 + 0 + 0) = 2095,98. Посчитаем средний размер картинок для тех вакансий, где они есть: 2095,98 / 6 = 349,33 Кб.<br>1,217 млн (вакансии) * (5,02 Кб (текст) + 349,33 Кб (фотографии в вакансии) * 0,3 (вероятность наличия фотографий в вакансии)) = 133649723 Кб = 0,12 Тб | 
|Компании                     |      1,16     | Расчитываем вес текста и картинок, возьмем 20 случайных страниц компаний.<br>Текст: (2205 + 885 + 842 + 1497 + 585 + 1667 + 4615 + 1564 + 2568 + 992 + 2848 + 1462 + 1435 + 875 + 1177 + 1002 + 648 + 2134 + 2232 + 1959) / 20 = 1659,6. 1659,6 * 2 / 1024 = 3,2 Кб<br>Картинки: 0 + 0 + 0 + 0 + 0 + (536,3 + 98,4 + 68,7 + 65,2 + 62,5) + (0,6 + 0,57 + 0,24 + 0,61 + 0,624 + 0,43 + 0,92 + 216,18 + 154,7 + 123,9 + 0,94 + 0,486 + 0,46 + 0,98 + 0,68 + 0,57 + 1,05 + 202,9 + 155,3 + 1,04 + 131,9 + 142,52 + 243,08 + 117,5 + 227,52 + 196,77) + 0 + 0 + 0 + (1195,25 + 2,88 + 0,54 + 3,46 + 1,12 + 2,57 + 347,99 + 315,82 + 311,94 + 324,4 + 314,99 + 261,94 + 282,56 + 380,34 + 0,14 + 7,61 + 339,46 + 308,32 + 292,89 + 256,17 + 212,79 + 154,53 + 108,52 + 105,16 + 274,83 + 389,53 + 99,69 + 390,14 + 243,16) + 0 + 0 + 0 + 0 + (33,20 + 183,45 + 7,15 + 17,22 + 1,93 + 53,49 + 95,67 + 299,31 + 2,25 + 7,93 + 210,71 + 6,48) + 0 + 0 + (21,31 + 75,8 + 64,78 + 71,15 + 96,95) + 0 = 10931,09 Кб. Средний размер картинок на страницах компаний, где они есть: 10931,09 / 5 = 2186,2 Кб<br>2,276 млн (компании) * (3,2 Кб (текст) + 2186,2 Кб (фото) * 0,25) = 1251241242 Кб = 1,16 Тб | 
|Пользователи                 |       10,25       | Профили на hh.ru приватные, так что четкой информации насчет размера профиля нет. Текст будет составлять примерно 2000 символов, т.е. 3,9 Кб. Фотография так же, как и в резюме - 200 Кб.<br>54 млн (пользователи) * (3,9 Кб (текст) + 200 Кб (фото)) = 11010600000 Кб = 10,25 Тб | 

Общий размер хранилища: 26,18 Тб

### Сетевая нагрузка:

Расчет rps:
- 2,1 млн DAU * 59 (действия пользователей) / 86400 (кол-во секунд в дне) = 1434 rps
- Средний размер запроса = 5 Кб (усредненно для всех типов запросов)
- Пиковый коэффициент: 2x. Ввиду специфики сайта, нет явных пиковых событий, кроме повышенной дневной активности пользователей в сравнении с вечерней активностью.

Итого: 1434 * 5 * 3 * 8 бит = 168 Мбит/сек (средняя пиковая нагрузка)

| Действие                    | RPS | RPS в пик | Сеть пик (Мбит/сек) | Сеть в день (Гбайт/сутки) |
|-----------------------------|-----|-----------|---------------------|------------------------|
| Авторизация                 | 0,7 | 1,4 | 0,07 | 0,35 |
| Регистрация                 | 0,5 | 1,0 | 0,08 | 0,41 |
| Просмотр вакансий           | 1069 | 2138 | 1670 | 8808,3 |
| Поиск вакансий              | 315 | 630 | 492 | 2595,5 |
| Публикация вакансий         | 0,02 | 0,04 | 0,02 | 0,08 |
| Закрытие вакансий           | 0,07 | 0,14 | 0,005 | 0,02 |
| Отклик на вакансию          | 4,8 | 9,6 | 3,75 | 19,78 |
| Ответ на отклик на вакансию | 4,8 | 9,6 | 0,75 | 3,95 |
| Использование чата          | 41,3 | 82,6 | 6,5 | 34,03 |
| Создание резюме             | 3,9 | 7,8 | 21 | 112,47 |

- Авторизация
  - (0,03 * 2,1М) / 86400 = 0,7 rps
  - Несколько полей для авторизации: 100 символов * 2 = 200 байт примерно займёт 0,2 Кб
  - 1,4 * 6 Кб * 8 / 1024 = 0,07 Мбит/сек
  - 0,7 * 6 Кб * 86400 / (1024 * 1024) = 0,35 Гбайт/сутки
- Регистрация
  - (0,00005 * 2,1М) / 86400 = 0,5 rps
  - Больше полей, чем в авторизации, примерно в 2 раза больше символов => 0,4 Кб
  - 1,0 * 10 Кб * 8 / 1024 = 0,08 Мбит/сек
  - 0,5 * 10 Кб * 86400 / (1024 * 1024) = 0,41 Гбайт/сутки
- Просмотр вакансий
  - (44 * 2,1М) / 86400 = 1069 rps
  - 100 Кб - список вакансий с коротким описанием, иконками компаний, названиями вакансий
  - 2138 * 100 Кб * 8 / 1024 = 1670 Мбит/сек
  - 1069 * 100 Кб * 86400 / (1024 * 1024) = 8808,3 Гбайт/сутки
- Поиск вакансий
  - (13 * 2,1М) / 86400 = 315 rps
  - 100 Кб
  - 630 * 100 Кб * 8 / 1024 = 492 Мбит/сек
  - 315 * 100 Кб * 86400 / (1024 * 1024) = 2595,5 Гбайт/сутки
- Публикация вакансий
  - (0,001 * 2,1М) / 86400 = 0,02 rps
  - 50 Кб - фотография внутри вакансии, подробное описание вакансии
  - 0,04 * 50 Кб * 8 / 1024 = 0,02 Мбит/сек
  - 0,02 * 50 Кб * 86400 / (1024 * 1024) = 0,08 Гбайт/сутки
- Закрытие вакансий
  - (0,003 * 2,1М) / 86400 = 0,07 rps
  - 5 Кб
  - 0,14 * 5 Кб * 8 / 1024 = 0,005 Мбит/сек
  - 0,07 * 5 Кб * 86400 / (1024 * 1024) = 0,02 Гбайт/сутки
- Отклик на вакансию
  - (0,2 * 2,1М) / 86400 = 4,8 rps
  - 50 Кб - потенциальное сопроводительное письмо + ссылка на резюме
  - 9,6 * 50 Кб * 8 / 1024 = 3,75 Мбит/сек
  - 4,8 * 50 Кб * 86400 / (1024 * 1024) = 19,78 Гбайт/сутки
- Ответ на отклик на вакансию
  - (0,2 * 2,1М) / 86400 = 4,8 rps
  - 10 Кб - текстовое содержание ответа на отклик
  - 9,6 * 10 Кб * 8 / 1024 = 0,75 Мбит/сек
  - 4,8 * 10 Кб * 86400 / (1024 * 1024) = 3,95 Гбайт/сутки
- Использование чата
  - (1,7 * 2,1М) / 86400 = 41,3 rps
  - 10 Кб - текст сообщения
  - 82,6 * 10 Кб * 8 / 1024 = 6,5 Мбит/сек
  - 41,3 * 10 Кб * 86400 / (1024 * 1024) = 34,03 Гбайт/сутки
- Создание резюме
  - (0,16 * 2,1М) / 86400 = 3,9 rps
  - 350 Кб - текст резюме + фотография + ссылки на личные сейты пользователя
  - 7,8 * 350 Кб * 8 / 1024 = 21 Мбит/сек
  - 3,9 * 350 Кб * 86400 / (1024 * 1024) = 112,47 Гбайт/сутки
 



## Ссылки

[^1]: https://yadro.ru/stat/HeadHunter/index.html?period=month
[^2]: https://hypestat.com/info/hh.ru
[^3]: https://investor.hh.ru/
[^4]: https://hh.ru/article/28?from=footer_new&hhtmFromLabel=footer_new&hhtmFrom=main
[^5]: https://hh.ru/search/resume?text=&area=1&isDefaultArea=true&exp_period=all_time&logic=normal&pos=full_text&hhtmFrom=vacancy_search_list&hhtmFromLabel=resume_search_line
[^6]: https://www.indeed.com/about
[^7]: https://hypestat.com/info/indeed.com
[^8]: https://analyzify.com/statsup/linkedin
[^9]: https://thesocialshepherd.com/blog/linkedin-statistics
[^10]: https://news.linkedin.com/about-us 
[^11]: https://hypestat.com/info/linkedin.com
[^12]: https://searchanise.io/blog/navigation-vs-search-box/
[^13]: https://www.businessofapps.com/data/linkedin-statistics/
[^14]: https://stats.hh.ru/moscow
[^15]: https://supplygem.com/publications/linkedin-statistics
[^16]: https://hh.ru/search/resume?from=employer_index_footer&page=2&searchSessionId=c80868f7-3b88-4f5d-b43b-d229e60acb33
[^17]: https://careersdonewrite.com/blog/photo-study-a-survey-of-linkedin-profiles/?utm_source=chatgpt.com
[^18]: https://portraitpal.ai/blog/what-size-should-a-headshot-be/
